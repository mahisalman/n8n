{
  "name": "AI Article Processor with Gemini",
  "nodes": [
    {
      "parameters": {
        "path": "article-processor",
        "methods": ["POST"]
      },
      "id": "Webhook_1",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [200, 300]
    },
    {
      "parameters": {
        "url": "={{$json[\"article_url\"]}}",
        "operation": "scrapeUrl"
      },
      "id": "Firecrawl_1",
      "name": "Fetch Article (Firecrawl)",
      "type": "n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [450, 300]
    },
    {
      "parameters": {
        "model": "gemini-pro",
        "mode": "chat",
        "messages": [
          {
            "role": "system",
            "content": "You are a helpful assistant."
          },
          {
            "role": "user",
            "content": "Summarize the following article into 3â€“5 sentences:\n\n{{$json[\"data\"][\"content\"]}}"
          }
        ]
      },
      "id": "Gemini_1",
      "name": "Summarize Article (Gemini)",
      "type": "n8n-nodes-base.googleAi",
      "typeVersion": 1,
      "position": [700, 200]
    },
    {
      "parameters": {
        "model": "gemini-pro",
        "mode": "chat",
        "messages": [
          {
            "role": "system",
            "content": "You are an expert analyst."
          },
          {
            "role": "user",
            "content": "Extract 3â€“5 key insights from the following article:\n\n{{$json[\"data\"][\"content\"]}}"
          }
        ]
      },
      "id": "Gemini_2",
      "name": "Extract Insights (Gemini)",
      "type": "n8n-nodes-base.googleAi",
      "typeVersion": 1,
      "position": [700, 400]
    },
    {
      "parameters": {
        "operation": "append",
        "sheetId": "<YOUR_GOOGLE_SHEET_ID>",
        "range": "Sheet1!A:E",
        "fields": {
          "values": [
            "={{$json[\"session_id\"]}}",
            "={{$json[\"article_url\"]}}",
            "={{$json[\"summary\"]}}",
            "={{$json[\"insights\"]}}",
            "={{$json[\"email\"]}}"
          ]
        }
      },
      "id": "GoogleSheets_1",
      "name": "Google Sheets Append",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 3,
      "position": [950, 300]
    },
    {
      "parameters": {
        "toEmail": "={{$json[\"email\"]}}",
        "subject": "Your Article Summary & Insights",
        "text": "Hi,\n\nHereâ€™s the summary and insights from your article:\n\nðŸ“Œ Summary:\n{{$json[\"summary\"]}}\n\nðŸ’¡ Insights:\n{{$json[\"insights\"]}}\n\nThanks,\nYour AI Agent"
      },
      "id": "Email_1",
      "name": "Send Email",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 1,
      "position": [1200, 300]
    }
  ],
  "connections": {
    "Webhook_1": {
      "main": [
        [
          {
            "node": "Fetch Article (Firecrawl)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Article (Firecrawl)": {
      "main": [
        [
          {
            "node": "Summarize Article (Gemini)",
            "type": "main",
            "index": 0
          },
          {
            "node": "Extract Insights (Gemini)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarize Article (Gemini)": {
      "main": [
        [
          {
            "node": "Google Sheets Append",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Insights (Gemini)": {
      "main": [
        [
          {
            "node": "Google Sheets Append",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets Append": {
      "main": [
        [
          {
            "node": "Send Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
